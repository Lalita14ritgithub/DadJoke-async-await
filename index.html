<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dad joke with async await</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Welcome to Dad Jokes!</h1>
        <section class="api_body"></section>
        <button id="fetchjoke">Get Another Joke</button>

        <script>
            const apiBody = document.querySelector(".api_body");
            const apiUrl = "https://icanhazdadjoke.com/";

            // async function fetchData(){
            const fetchData = async () => {
              try{
                const response = await fetch(apiUrl, {
                    headers:{
                        Accept: "application/json",
                    },
                });
                //console.log(response);
                const data = await response.json();
                console.log(data.joke);
                apiBody.innerHTML = data.joke;
              } catch(error){
                apiBody.innerHTML = error;
                console.log(error);
              }
            }
            fetchData();

            // add event listner to fetch a new joke when the button is cliked
            document.getElementById("fetchjoke").addEventListener("click", fetchData);
        </script>
    </div>
</body>
</html>